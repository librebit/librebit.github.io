<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Instalación de touchscreen Tontec en Raspberry Pi</title>
  <meta name="description" content="Introducción. El uso de sistemas mínimos o embedidos implica por lo general algún método para su monitoreo o control, que puede ser desde el puerto serial o ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html">
  <link rel="alternate" type="application/rss+xml" title="LibreBit" href="http://librebit.github.io/feed.xml">
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">LibreBit</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">Acerca de</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Instalación de touchscreen Tontec en Raspberry Pi</h1>
    <p class="post-meta"><time datetime="2016-03-18T16:15:51+00:00" itemprop="datePublished">Mar 18, 2016</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Iván Rodríguez</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><em>Introducción.</em></p>

<p>El uso de sistemas mínimos o embedidos implica por lo general algún método para su monitoreo o control, que puede ser desde el puerto serial o UART, un enlace SSH o alguna interfaz gráfica. El uso de monitores en dispositivos tan pequeños como los embebidos se ha popularizado, de tal modo que estan pantallas incluyen funciones touch en tan sólo 3.5 pulgadas.</p>

<!-- more -->

<p>Un dispositivo embebido muy popular son los <a href="https://www.raspberrypi.org/">Raspberry Pi</a>, tienen el poder de cómputo de un equipo de la década de 1990 en el tamaño de una tarjeta de crédito. Junto a un sistema operativo como Linux e incluso Windows, permite desarrollar aplicaciones de control y monitoreo sin necesidad de instalar una computadora completa para una taréa sencilla.</p>

<p>Empresas como <a href="http://www.itontec.com/">Tontec</a> han desarrollado pantallas touch compatibles con Raspberry, estas permiten de un modo rápido observar el estado de la Raspberry sin necesidad de un dispositivo externo o remoto.</p>

<p><em>Instalación de la pantalla.</em></p>

<p>La pantalla incluye un case para poder montarse junto a la tarjeta de la raspberry, el cuál quedaría de la siguiente manera.</p>

<p><img src="/images/pantalla_perfil.jpg" /></p>

<p><img src="/images/pantalla_frente.jpg" /></p>

<p>El conector que utiliza la pantalla es el GPIO, pero no ocupa todos los pines.</p>

<p><img src="/images/pantalla_conector.jpg" /></p>

<p>Finalmente, la pantalla quedaría instalada de la siguiente manera.</p>

<p><img src="/images/pantalla_cerrada.jpg" /></p>

<p><em>Actualización de Raspbian.</em></p>

<p>Antes de cualquier instalación, se recomienda la actualización del sistema operativo de la Raspberry, en este caso es <a href="https://www.raspbian.org/">Raspbian</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo reboot
</code></pre>
</div>

<p>El proceso de actualización es similar a los sistemas operativos de escritorio de Linux.</p>

<p><em>Habilitar SPI e indicar pantalla Tontec a overlay.</em></p>

<p>La pantalla Tontec utiliza el puerto SPI del conector GPIO de la tarjeta Raspberry, por lo que es necesario habilitar el puerto SPI e indicar el dispositivo que se va a conectar en el. Para ello hay que modificar el archivo de configuración.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo nano /boot/config.txt
</code></pre>
</div>

<p>Se busca los parámetros de configuración en el archivo y se habilitan, en caso de no existir, se agregan en el archivo.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dtparam=spi=on
dtoverlay=mz61581
</code></pre>
</div>

<p>Para habilitar el inicio del sistema operativo en la pantalla touch se tiene que modificar el archivo de configuración de X11, que es el relacionado con el video del sistema operativo.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo nano /usr/share/X11/xorg.conf.d/99-fbturbo.conf
</code></pre>
</div>

<p>Por default la salida de video es el HDMI</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Option "fbdev" "/dev/fb0"
</code></pre>
</div>

<p>Para habilitar la pantalla touch se indica que la salida de video es overlay.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Option "fbdev" "/dev/fb1"
</code></pre>
</div>

<p>En caso de que se desee regresar a la salida de HDMI, solo se cambia <code class="highlighter-rouge">fb1</code> a <code class="highlighter-rouge">fb0</code>. Finalmente, se indica al arranque en que momento se manda la señal de video a la pantalla touch, para ello se modifica el archivo de arranque del sistema operativo.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo nano /boot/cmdline.txt
</code></pre>
</div>

<p>Se agrega el siguiente comando al final de la línea, no es necesario agregar una línea adicional.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>fbcon=map:10 
</code></pre>
</div>

<p>Si todos los cambios se hicieron de manera correcta, se manda reiniciar al sistema operativo, desde la línea de comando se puede invocar a la función de reinicio.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo reboot
</code></pre>
</div>

<p><img src="/images/pantalla_on.jpg" /></p>

<p>Con el dedo o con la ayuda de una pluma, se puede acceder a los menús del sistema operativo.</p>

<p><img src="/images/pantalla_touch.jpg" /></p>

<p><em>Conclusión.</em></p>

<p>Dispositivos como los raspberry han tomado popularidad debido a su costo y fácil manejo, existen una diversidad de dispositivos y sensores que permiten desarrollar sistemas sin necesidad de adquirir equipo costoso o especilizado, dejando libertad a la creatividad del programador para alcanzar sus objetivos.</p>

<p>viktorivan@openmailbox.org</p>

<p>@viktor_ivan</p>

    <a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html" data-text="Instalación de touchscreen Tontec en Raspberry Pi -" data-dnt="true">Twitter</a>
    <div class="g-plusone" data-href="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html" data-annotation="none" data-width="" data-size="medium"></div>
    <div class="g-plus" data-action="share" data-href="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html" data-annotation="none" data-width="" data-size="medium"></div>
    <div class="fb-like" data-href="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html" data-layout="button" data-action="like" data-show-faces="false" data-colorscheme="light" data-kid-directed-site="false" data-share="false"></div>
    <div class="fb-send" data-href="http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html" data-colorscheme="light" data-kid-directed-site="false"></div>
    <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'librebitblog'; var disqus_url = 'http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html'; var disqus_identifier = 'http://librebit.github.io/tontec/touchscreen/raspberry/raspbian/2016/03/18/instalacion-de-touchscreen-tontec-en-raspberry-pi.html'; var disqus_title = 'Instalación de touchscreen Tontec en Raspberry Pi'; (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//librebitblog.disqus.com/embed.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>

</article>

      </div>
    </main>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <div id="fb-root"></div> <script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0"; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
    <script type="text/javascript"> (function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/platform.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })(); </script>
    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">LibreBit</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>LibreBit</li>
          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/librebit"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">librebit</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/viktor_ivan"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">viktor_ivan</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Un blog sobre el conocimiento libre.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
